<!--.row>(.col-md-3>h2.text-right)+.col-md-9-->
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Geekwise Javascript 1</title>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,400,300,600,700'
          rel='stylesheet'
          type='text/css'>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="./static/css/prism.css" />
    <link rel="stylesheet" href="./static/css/reset.css">
    <link rel="stylesheet" href="./static/css/style.css">
</head>
<body class="theme day">
<header id="nav">
</header>

<div class="container content">
<h1 class="row text-center hdr">
    Day 9
</h1>

<div class="row">
    <div class="col-md-3">
        <h2 class="text-right">Concepts</h2>
    </div>
    <div class="col-md-9 concepts">
        <ul>
            <li>Review Take Home Assignment</li>
            <li>Skill Builder</li>
            <li>Creating Elements</li>
            <li>Removing Elements</li>
            <li>Event Listeners</li>
            <li>Working with forms</li>
            <li>Working with Radio / checkboxes</li>
            <li>Event Delegation</li>
            <li>Array sorting</li>
            <li>Organizing An application</li>
            <li>More DOM</li>
            <li>Date Object</li>
            <li>TakeHome</li>
        </ul>
    </div>
</div>

    <div class="row">
        <div class="col-md-3">
            <h2 class="text-right">Review Take Home</h2>
        </div>
        <div class="col-md-9">
            <div class="point">
                We'll code this up in class.
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-3">
            <h2 class="text-right">Skill Builder</h2>
        </div>
        <div class="col-md-9">
            <div class="point">
                Alter the takehome from day 8 to use event delegation instead of individual click events on each li node
                that we add to the movie list.  Remember, this means that there should be a click event somewhere higher
                up in the dom, that will catch the event.
            </div>

            <div class="point">
                Some things to remember:

                <ul class="list">
                    <li>
                        Since we're not going to be adding click event handlers, we need to find some other way to store
                        the movie instance reference to the li.
                    </li>
                    <li>
                        Hint: Dom element objects are no different than any other javascript object, how could you create
                        an arbitrary element in a normal object?
                    </li>
                </ul>

                <a href="day9-skillbuilder.html">Link to example</a>
            </div>
        </div>
    </div>


    <div class="row">

        <div class="col-md-3">
            <h3>Creating Elements</h3>
        </div>

        <div class="col-md-9">
            <div class="point">
                Here is where the real magic of the DOM becomes apparent.  Not only can we inspect the existing DOM, we
                can add to it!  To create an element we use the <code>document.createElement()</code> function.  It takes
                as an argument a string with the same name as the tag you want to create.  So if you wanted to create
                a anchor, you would use <code>document.createElement("a")</code>.  Lets make a new element now...
            </div>

<pre>
    <code class="language-javascript">
        var a = document.createElement("a");
        console.log(a);
    </code>
</pre>

            <div class="point">
                Great, so we created an empty anchor tag.  This isn't of to much use yet, lets assign some other properties
                to the anchor so we can get some actual use out of it.  How about some text (so we have something to
                click on).  We can set the text content using the <code>textContent</code> property
            </div>

<pre>
    <code class="language-javascript">
        a.textContent = "I'm a link to google";
        console.log(a);
    </code>
</pre>

            <div class="point">
                And what good is a link without an <code>href</code>?  Now...how did we set attributes on a link?
            </div>

<pre>
    <code class="language-javascript">
        a.setAttribute("href", "http://www.google.com");
        console.log(a);
    </code>
</pre>

            <div class="point">
                It's worth it to note, that there are some properties of an element that you can access without
                <code>setAttribute</code>.  <code>href</code> is one of these properties.  If you're ever not sure check
                out the MDN for what attributes are available via an elements interface.  Here is the link to the
                <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLAnchorElement">Anchor interface</a>.
                Lets set the <code>href</code> of the <code>a</code> tag using this syntax.
            </div>

<pre>
    <code class="language-javascript">
        a.href = "http://www.yahoo.com";
    </code>
</pre>

            <div class="point">
                If you're refreshing your page hoping to see your new element ready for use, this may be anticlimactic
                for you.  So far, we've created an element in memory, but now we need to do something with it.
            </div>

            <div class="point">
                Lets add it on the page.  We do this using the <code>appendChild</code> function.  When using the
                <code>appendChild</code> function, we first need to tell the DOM where exactly to append the child to.
                In your console, enter <code>document.body</code>.  What does the console show?
            </div>

            <div class="point">
                The <code>document.body</code> is a shortcut that to the body tag.  Since we want the new element to
                show up on the page, at a minimum it needs to be attached to the body tag (since the body tag is what is
                visible on the page).
            </div>

<pre>
    <code class="language-javascript">
        document.body.appendChild(a);
    </code>
</pre>

            <div class="point">
                As you can see above, the <code>document.body</code> is a reference to the &lt;body&gt; tag.  So it's telling
                javascript to append a child node to the body tag.  This can be done on ANY node you have selected.

                <div class="excercise">
                    Try it: append an anchor tag to the h1 we selected earlier in the excercise.
                </div>
            </div>

<pre>
    <code class="language-javascript">
        h1.appendChild(a);
    </code>
</pre>
        </div>

        <div class="col-md-3">
            <h3>Removing Elements</h3>
        </div>

        <div class="col-md-9">
            <div class="point">
                What good would all of this be if we couldn't remove elements from the page.  This is done with the
                <code>removeChild</code> called on the parent element of the element you want to remove.
            </div>

<pre>
    <code class="language-javascript">
        document.body.removeChild(a);
    </code>
</pre>

            <div class="point">
                Note: the removeChild example isn't to exciting, since we add it, then remove it right away.  Lets delay
                the removal of the element using <code>setTimeout</code>.
            </div>

<pre>
    <code class="language-javascript">
        setTimeout(function () {
        document.body.removeChild(a);
        }, 2000);
    </code>
</pre>

            <div class="point">
                The <code>setTimeout</code> function takes as an argument a function as the first argument and a number
                as the second argument.  The setTimeout function will wait the specified amount of time, then call the
                function you've passed in.  The above will wait 2000 milliseconds, then call the function.
            </div>
        </div>
    </div>

    <h3>Styling Elements</h3>

    <div class="point">
        Along with selecting, adding and modifying elements in the dom, we can also apply styling.  We do this via the
        <code>element.style</code> property.
    </div>

    <div class="point">
        When we use this property, the style names use no dashes, instead using camelCasing.  For instance, if a
        css selector looked like:
    </div>

<pre>
    <code class="language-css">
        a {
        background-color: red;
        }
    </code>
</pre>

    <div class="point">
        The javascript style property would be:
    </div>

<pre>
    <code class="language-javascript">
        a.style.backgroundColor = "red";
    </code>
</pre>

    <div class="point">
        However, we could alternatively set the style property using the <code>setAttribute</code> function.  When
        we do it that way, we can use the regular css syntax.
    </div>

<pre>
    <code class="language-javascript">
        a.setAttribute("style", "background-color: red; color: white;");
    </code>
</pre>

    <h3>Putting it all together</h3>

    <div class="point">
        So at this point we now know how to select existing elements, create new elements, modify element attributes,
        and append the elements to other elements already on the page.  Lets create a helper function to make
        some of this easier.

        <div class="excercise">
            Try it: Create a function that will have the following signature: <code>e(elementType, text, attributes, styles)</code>
            where <code>elementType</code> is a string of an element type, attributes is an object of attributes to set
            on an element, and styles is an object of style properties to set on an object.  Then return the
            newly created element.
        </div>
    </div>

<pre>
    <code class="language-javascript">
        function e(elementType, text, attributes, styles) {
        var newElement = document.createElement(elementType);
        newElement.textContent = text;

        //set the attributes on the tag
        for (var attr in attributes) {
        if (attributes.hasOwnProperty(attr)) {
        newElement.setAttribute(attr, attributes[attr]);
        }
        }

        //set the styles
        for (var style in styles) {
        if (styles.hasOwnProperty(style)) {
        newElement.style[style] = styles[style];
        }
        }

        return newElement;
        }

        e("a", "link to google", {href: "http://www.google.com"}, {color: "red"});
    </code>
</pre>

</div>
</div>

<div class="row">
    <div class="col-md-3">
        <h2 class="text-right">Event Listeners</h2>
    </div>
    <div class="col-md-9">
        <div class="point">
            In javascript, Event listeners are how we can react to user interaction on the page. For
            instance, alert something to a user when they try and delete an element, or run an arbitrary
            javascript function when a user clicks a button.
        </div>

        <div class="point">
            The DOM has built in methods that allow for registering "handlers" for a given
            "<a target="_blank" href="https://developer.mozilla.org/en-US/docs/Web/Events">event</a>", like click or
            mouseover.
        </div>

        <div class="point">
            Lets start by creating a simple html page with a with a button.  We'll assign an event handler
            to the button.
        </div>

<pre>
    <code class="language-markup">
        &lt;button id="alert"&gt;Alert something&lt;/button&gt;
    </code>
</pre>

        <div class="point">
            Now that we have a button we can add a <code>click</code> handler for, lets actually add the listener. We
            will use the <code>element.addEventListener(event, handler)</code> function where event is a string for a
            named event, and the handler is a function to call when the event happens. In this way, the
            function is referred to as a <code>callback</code>.

            <div class="excercise">
                Try it: Add the button markup, and write some js that will select the button, and then use
                the button to add an event listener.
            </div>
        </div>

<pre>
    <code class="language-javascript">
        var button = document.getElementById("alert");

        button.addEventListener("click", function () {
        alert("hello world");
        console.log(this); //what is the context to our callback function?
        });
    </code>
</pre>

        <div class="point">
            Now, if you've added the button markup, and run that javascript, you should now be able to click
            on the button and see an alert. Notice the console.log there? What is the <code>this</code> of
            the function?
        </div>

        <div class="point">
            In callbacks, it's usually the case that the <code>context</code> will the the node element itself.
        </div>

        <div class="point">
            Lets make this a little more dynamic. Add an attribute to your button called <code>rel="..."</code>
        </div>
<pre>
    <code class="language-markup">
        &lt;button id="alert" rel="This is some text"&gt;Alert something&lt;/button&gt;
    </code>
</pre>

        <div class="point">
            Lets use that new rel attribute as the content of our alert.  Since we know that the context of
            our function is going to be the node itself, we can use all of our node related functions on the
            this object.

            <div class="excercise">
                Try it: Use the <code>this</code> inside your callback to get the attribute value and alert
                that instead of the hard coded text.
            </div>
        </div>

<pre>
    <code class="language-javascript">
        var button = document.getElementById("alert");

        button.addEventListener("click", function () {
        alert(this.getAttribute("rel"));
        });
    </code>
</pre>

        <div class="point">
            <div class="excercise">
                Alter the takehome assignment to add a "rel" attribute to the <code>&lt;li&gt;</code> nodes.
                Then addEventListener for clicks on the <code>&lt;li&gt;</code> tags.  Alert the <code>rel</code>
                attributes for each li that is clicked on.
            </div>
        </div>

<pre>
    <code class="language-javascript">
        //loop our movie array and create one li for each movie,
        //with the title as the text
        for (var i = 0; i < movieObjs.length; i++) {
        var movie = movieObjs[i];
        var li = e("li", movie.title, {rel: movie.title}, {color: "red"});
        li.addEventListener("click", function () {
        alert(this.getAttribute("rel"));
        });

        ul.appendChild(li);
        }
    </code>
</pre>

        <div class="point">
            The above modification will add a rel attribute to our li nodes that will track the movie title,
            and the new event listener will listen for <code>click</code> events and run the specified callback
            which will alert the <code>rel</code> attribute.
        </div>

        <div class="point">
            There are many more event types you can have element's listen for, and many that are used specifically
            with forms.  We'll talk about those next...
        </div>

        <h3>Working with forms</h3>

        <div class="point">
            Forms in HTML are a perfect way to collect information from someone interacting with your webpage.
            Until now, we've used prompts as a way of collecting data, but prompts are clunky which makes a
            form a much more attractive alternative.  Form usages vary widely based on the type of
            information you're collecting, and which form elements you decide to work with.
        </div>

        <div class="point">
            Lets start with a simple text input, that will allow us to input a movie title.
        </div>

<pre>
    <code class="language-javascript">
        &lt;form name="newMovieForm" id="newMovieForm"&gt;
        &lt;input type="text" name="movieTitle" id="movieTitle" /&gt;
        &lt;input type="submit" value="Add Movie" /&gt;
        &lt;/form&gt;
    </code>
</pre>

        <div class="point">
            Notice, we've added id's to our form and our input.  This is going to make it easy to work the
            form fields in javascript.
        </div>

        <div class="point">
            Also, notice that our form tag lacks an action or method attribute you may be familiar with. This
            is because we aren't actually going to be submitting this form in a traditional way.  We'll be
            using javascript to work with the form, meaning there won't be a traditional submit needed.
        </div>

        <h3>The <code>submit</code> event</h3>

        <div class="point">
            So, just like we added a <code>click</code> event to our li tags in the previous exercise, there
            are other events we can listen for and react to with javascript.  One of these is the <code>submit</code>
            event of an HTML form.
        </div>

        <div class="point">
            This works like you would probably expect.  We get a reference to our form, add a submit event
            listener, then write a callback function to handle processing our form.
        </div>

        <div class="point">
            To start with, our goal will be to <code>alert</code> the movie title entered in the form when we
            click the submit button.  To do this, we need to know how to get the <code>value</code> from a
            form field.  We use the <code>value</code> property for this.
        </div>

<pre>
    <code class="language-javascript">
        document.getElementById("movieTitle").value;
    </code>
</pre>

        <div class="point">
            Enter a value in the field and then run the above code in the console.  The result should be the
            value you entered in the field.
        </div>

        <div class="point">
            Now that we know how to get the value of a form field, lets add an event handler that will alert
            the value of the movieTitle field when the form is submitted.
        </div>

<pre>
    <code class="language-javascript">
        var form = document.getElementById("newMovieForm");

        form.addEventListener("submit", function () {
        var movie = document.getElementById("movieTitle").value;
        alert(movie);
        });
    </code>
</pre>

        <div class="point">
            Now, enter a value in your form field, and click submit.  What happens?  What result did you get?
            What happened after you dismissed the alert?
        </div>

        <div class="point">
            You should have seen your form was submitted.  Well, that's not very useful, since as soon as the
            form is submitted, all the javascript we were executing will be refreshed, and everything starts
            over from scratch.  Wouldn't it be great if we could some how stop that page refresh from happening?
        </div>

        <div class="point">
            This is where the <code>event</code> object becomes really useful.  The event listener callback
            that we've been working with actually receives one argument.  We've not used it thus far, but when
            the callback is run, it's passed the <code>event</code> object as an argument.
        </div>

        <div class="point">
            The event object contains properties and functions related to the event that occurred, a submit
            event in this case.
        </div>

        <div class="point">
            It also contains functions that allow us to alter how the event continues after our callback function
            has run.  One particularly useful is the <code>evt.preventDefault()</code> function.
        </div>

        <div class="point">
            The <code>preventDefault()</code> function does exactly what it says, it prevents the default behavior
            from occuring.  That means is we are working with a submit event, the <code>preventDefault</code> function
            would prevent the submit from happening, making our callback function the only way to work with
            this form, as it will no longer submit.  Lets try it!
        </div>

<pre>
    <code class="language-javascript">
        //notice the evt argument now being passed to the event listener callback
        var form = document.getElementById("newMovieForm");

        form.addEventListener("submit", function (evt) {
        var movie = document.getElementById("movieTitle").value;
        alert(movie);
        evt.preventDefault();
        });
    </code>
</pre>

        <div class="point">
            So now we get our movie title alerted, but the form no longer submits. Success!
        </div>

        <h3>
            Working with radio / checkboxes
        </h3>

        <div class="point">
            Radio buttons let you select one option from a group items.  The name attribute on a group of
            radio buttons is always the same.  Lets add a "genre" radio group with a few options.
        </div>


<pre>
    <code class="language-javascript">
        &lt;form name="newMovieForm" id="newMovieForm"&gt;
        &lt;input type="text" name="movieTitle" id="movieTitle" /&gt;
        &lt;div id="genre"&gt;
        &lt;input type="radio" name="genre" value="comedy" /&gt; comedy&lt;br /&gt;
        &lt;input type="radio" name="genre" value="drama" /&gt; drama&lt;br /&gt;
        &lt;input type="radio" name="genre" value="horror" /&gt; horror
        &lt;/div&gt;
        &lt;input type="submit" value="Add Movie" /&gt;
        &lt;/form&gt;
    </code>
</pre>

        <div class="point">
            We can't use <code>getElementById</code> to get our radio inputs, but the dom does give us some
            other methods we can use to work with them.
        </div>

        <div class="point">
            <code>document.getElementsByName(...)</code> can be used in order to select an element by it's
            name attribute, which is perfect for radio buttons, since they always have the same name.
        </div>

<pre>
    <code class="language-javascript">
        var genreInputs = document.getElementsByName("genre");
        console.log(genreInputs);
    </code>
</pre>

        <div class="point">
            What does <code>genreInputs</code> look like in the console?  An array!  Does it have a length? Yes!
            We can loop it!
        </div>

        <div class="point">
            In order to find out which option from a radio group was selected, we need to look at the <code>checked</code>
            property of each radio.
            <div class="excercise">
                Try it: Loop the genreInputs and find which element is checked, by looking for for the <code>checked</code>
                property on each element.
            </div>
        </div>

<pre>
    <code class="language-javascript">
        var genre;

        for (var i = 0; i < genreInputs.length; i++) {
        var genreInput = genreInputs[i];
        if (genreInput.checked) {
        genre = genreInput.value;
        }
        }

        console.log(genre);
    </code>
</pre>

        <div class="point">
            The loop above will interrogate each radio element and see if it's checked.  If it is, it sets
            the genre variable equal to the current radio elements value.
        </div>

        <div class="point">
            One important thing to remember is that radio elements are only meant to return one value.
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-3">
        <h2 class="text-right">Event Delegation</h2>
    </div>
    <div class="col-md-9">

        <div class="point">
            As we've seen so far, all of our event handlers are attached directly to the element they work with.
            We attached click handlers on our li tags to alert a movie title, etc...  When this happens 1 copy
            of the function is created and stored for every event listener.  Imagine if we had an html list with
            500 items in it.  If we wanted to register a callback for every one of the li tags, that would
            store 500 copies of a callback function in memory!  There is a better way!
        </div>

        <h3>Event Bubbling</h3>

        <div class="point">
            In order to leverage a better way of watching using event listeners, we have to first understand
            how events in a browser work.
        </div>

        <div class="point">
            The idea of <code>event bubbling</code> simply means that an event bubbles up the dom tree, triggering
            the given event <strong>on every node</strong> up the dom tree.
        </div>

        <div class="point">
            So if I click on a button, the click event starts at the button, then moves to it's parent, then
            to that elements parent and so on, until it reaches the top of the document.
        </div>

        <div class="point">
            Lets create an example that uses event bubbling and it should become more clear how we might be
            able to use this.  Start with a ul that has 5 li's in it.
        </div>

<pre>
    <code class="language-markup">
        &lt;ul id="myul"&gt;
        &lt;li&gt;foo&lt;/li&gt;
        &lt;li&gt;bar&lt;/li&gt;
        &lt;li&gt;baz&lt;/li&gt;
        &lt;li&gt;bleep&lt;/li&gt;
        &lt;li&gt;bloop&lt;/li&gt;
        &lt;/ul&gt;
    </code>
</pre>

        <div class="point">
            Now I want to be able to click on any li and alert the text of that node.  But instead of attaching
            an event listener to every li, I'll just do it on the ul.  When we click on a li, the event will
            bubble up to it's parent (the UL) and the click event handler we'll set up will fire.
        </div>

<pre>
    <code class="language-javascript">
        document.getElementById("myul").addEventListener("click", function (evt) {
        console.log(this);
        console.log(evt);
        });
    </code>
</pre>

        <div class="point">
            Ok, so what is the <code>this</code> context in our callback?  It's the ul right?  So how can we
            know which li was actually clicked on that caused the click event that bubbled to the ul?
        </div>

        <div class="point">
            Lets take a closer look at the <code>evt</code> object that the event handler received.
        </div>

<pre>
    <code class="language-javascript">
        document.getElementById("myul").addEventListener("click", function (evt) {
        console.log(evt);
        });
    </code>
</pre>

        <div class="point">
            If we look closely, you'll see there is a property there called <code>target</code>. This
            property on the event object will contain the node we actually clicked on.
        </div>

        <div class="point">
            So now lets use this new <code>evt.target</code> property to get the <code>textContent</code> of
            the li we clicked on and alert that.
        </div>

<pre>
    <code class="language-javascript">
        document.getElementById("myul").addEventListener("click", function (evt) {
        alert(evt.target.textContent);
        });
    </code>
</pre>

        <div class="point">
            So now we only have 1 event handler for click events, which through the <code>evt</code> object
            we can determine which thing was actually clicked on, and do something with that.
        </div>

        <div class="point">
            Event delegation can single handedly reduce memory consumption of your app by great amounts if
            used properly.
        </div>

    </div>
</div>
<div class="row">
    <div class="col-md-3">
        <h2 class="text-right">Array Sorting</h2>
    </div>
    <div class="col-md-9">
        <div class="point">
            We've done quite a bit with array's to this point, and they've proven to be a useful data structure for
            holding content when order matters.
        </div>

        <div class="point">
            One useful function we've yet to discuss is sorting an array.  Array's come with built in methods that
            allow for sorting an array in just about any way you want to.  Lets start by taking a look at a numeric
            sort.
        </div>

<pre>
    <code class="language-javascript">
var nums = [4, 2, 9, 7, 3, 5, 1, 6, 8];
console.log(nums.sort());
    </code>
</pre>

        <div class="point">Awesome, we get the array, sorted by number.  Lets try a different example.</div>

<pre>
    <code class="language-javascript">
var nums = [100, 10, 4, 2, 9, 7, 3, 5, 1, 6, 8];
console.log(nums.sort());
    </code>
</pre>

        <div class="point">
            Notice anything odd about the way that array was sorted?  Here is a good example of why javascript sometimes
            can leave you scratching your head.  We can see that we got something like 1, 10, 100, 2, ...  Why is that?
        </div>

        <div class="point">
            The answer is that by default, js will sort things in Unicode order, which gives you something like the result
            above.  So...how can we make this act in a more sane way?
        </div>

        <div class="point">
            The sort function actually takes an argument, that is a function.  This function can do the job of determining
            how to sort the array, which means that you can sort in numerous ways.
        </div>

        <div class="point">
            The sorting function looks like this:
        </div>

<pre>
    <code class="language-javascript">
var nums = [100, 10, 4, 2, 9, 7, 3, 5, 1, 6, 8];
nums.sort(function (a, b) {
    //inspect a and b to determine how things should be sorted
});
    </code>
</pre>

        <div class="point">
            So the sorting function receives two arguments, usually aliased to <code>a</code> and <code>b</code>.  These
            are two elements from the array.  The sorting functions job is to compare the two array items and determine
            which is larger.  The return value of the sorting function will determine if the "a" element is sorting higher
            or lower than the "b" element.
        </div>

        <div class="point">
            It works like this:

            <ul class="list">
                <li>If the return value of the sorting function is a negative number, sort <code>a</code> lower than <code>b</code>.</li>
                <li>If the return value of the sorting function is a positive number, sort <code>a</code> higher than <code>b</code>.</li>
                <li>If the return value is 0, this signifies that the values are equal, so do not change these elements order.</li>
            </ul>
        </div>

        <div class="point">
            So, one quick way of sorting numbers might look like:
        </div>

<pre>
    <code class="language-javascript">
var nums = [100, 10, 4, 2, 9, 7, 3, 5, 1, 6, 8];
nums.sort(function (a, b) {
    return a - b;
});
    </code>
</pre>

        <div class="point">
            Lets hypothetically say a = 100 and b = 10;  100 - 10 === 90, which is a positive number, so <code>a</code>
            would be sorted higher than <code>b</code>.  If a = 10 and b = 100, then 10 - 100 === -90, so <code>a</code>
            would be sorted lower than <code>b</code>.
        </div>

        <h3>Array String Sorting</h3>

        <div class="point">
            String sorting for array's is a little nicer than numbers.  You can use greater than / less than operators
            with strings where "a" is the lowest value and "z" is the highest value.

            <div class="excercise">
                Try it: In your console, run <code>"a" < "z"</code> then run <code>"z" < "a"</code>.  The result should
                be <code>true</code> then <code>false</code>, because "a" is less than "z" and "z" is not less than "a".
                This is what the sort function does for strings.
            </div>
        </div>

        <div class="point">
            Lets sort an array of strings.
        </div>

<pre>
    <code class="language-javascript">
var strings = ["cherry", "apple", "berry"];
strings.sort();

console.log(strings);
    </code>
</pre>

        <div class="point">
            So, without much intervention on our part, an array of strings can be sorted just by calling sort on it.
        </div>

        <h3>Sorting an Array of objects</h3>

        <div class="point">
            It's often the case where you will have an array of objects.  How do we sort this then?  An object is neither
            a number or a string, so there must be some way to sort the objects.
        </div>

        <div class="point">
            In the sorting function, a and b will both be one of the objects from the array, which means we can use one
            of the objects properties to sort the array.  Lets look at an example.
        </div>

<pre>
    <code class="language-javascript">
var movieObjects = [
    {title: "Rad"},
    {title: "Avengers"},
    {title: "Big Lebowski"},
    {title: "Spiderman 1"},
    {title: "Spiderman 2"}
];

movieObjects.sort(function (a, b) {
    //how can we sort a and b so that the movie titles will be in proper alphabetical order?
});
    </code>
</pre>

        <div class="point">
            Given that each of those objects shares a similar form, we can use the <code>title</code> property of each
            object and return a -1, 1, or zero depending on the outcome.
        </div>

<pre>
    <code class="language-javascript">
movieObjects.sort(function (a, b) {
    var titleA = a.title.toLowerCase();
    var titleB = b.title.toLowerCase();

    if (titleA < titleB) {
        return -1;
    } else if (titleA > titleB) {
        return 1;
    }

    return 0;
});
    </code>
</pre>

        <div class="point">
            So this will compare the title property from each object for sorting purposes.  One thing of note is the
            first two lines of the sort function, the <code>toLowerCase()</code> function calls.  This is a handy way of
            making sure we are always dealing with the same letters, since "a" > "A" is true.
        </div>

        <div class="point">
            Then it goes on to say if the title of the <code>a</code> object is less than the title of the <code>b</code>
            object, sort <code>a</code> below <code>b</code>. Else if <code>a</code> is greater than <code>b</code> sort
            <code>a</code> above <code>b</code> else leave them alone.
        </div>

    </div>
</div>

    <div class="row">
        <div class="col-md-3">
            <h2 class="text-right">Organizing an application</h2>
        </div>
        <div class="col-md-9">
            <div class="point">
                As we begin writing more JS to handle our page interactions, it's important to organize our application
                in a way that will allow for ease of use / maintenance in the future
            </div>

            <div class="point">
                Lets talk about some best practices for structuring our application for the final project.
            </div>

            <div class="point">
                We've talked a lot about function scope, and how functions create their own scope that is inaccessible
                from outer scopes.  We've also talked a lot about how anything written in an "outer most" scope (global
                scope) will become part of the global scope (IE the window object).
            </div>

            <div class="point">
                When you begin writing a lot of javascript, it becomes desirable to <strong>NOT</strong> make everything
                part of the global scope.  We want to avoid cluttering the global scope with every function, variable, and
                object we create.  This is just good practice.
            </div>

            <div class="point">
                So how do we avoid creating EVERYTHING on the global scope?  Lets try something.  Run the code below in
                your console.
            </div>

<pre>
    <code class="language-javascript">
> window.foo //undefined
    </code>
</pre>

            <div class="point">
                Simply trying to access window.foo returns undefined, because it's not yet been created.  So lets
                create it.
            </div>

<pre>
    <code class="language-javascript">
function foo() { alert("foo"); }
    </code>
</pre>

            <div class="point">
                Now try accessing window.foo
            </div>

<pre>
    <code class="language-javascript">
window.foo //function () {...}
    </code>
</pre>

            <div class="point">
                So now that we've created the function foo, it's actually part of the global scope, <code>window</code>.
                This is what we want to try and avoid.  So, how do we do that?
            </div>

            <div class="point">
                The most common way is with something called an <code>IIFE</code> or Immediately Invoked Function Expression.
            </div>

            <div class="point">
                With an <code>IIFE</code> you essentially create a function that gets called immediately that will enclose
                all of our functionality within a function, which means <code>NOTHING</code> will be able to clutter our
                global scope (some exceptions do apply)
            </div>

            <div class="point">
                First, let's look at what an <code>IIFE</code> looks like
            </div>

<pre>
    <code class="language-javascript">
(function () {
    //your code goes here
}());
    </code>
</pre>

            <div class="point">
                So what is going on here?  Lets pick it apart...
            </div>

            <div class="point">
                We have an outermost set of parenthesis that contain a function, followed by an inner set of parenthesis.
            </div>

            <div class="point">
                The outermost set of parenthesis followed by the function keyword tells javascript to expect a function
                expression and not a function declaration.  The innermost parenthesis will immediately call the anon
                function and execute the function body.
            </div>

            <div class="point">
                Ok, so why do we need this?  Well as we discussed previously, functions create a new scope, so functions,
                variables, etc...that get created in the <code>IIFE</code> belong to that scope, and not the global scope.
            </div>

            <div class="point">
                In this way, we can have javascript files that are only concerned with their own purpose, to create a
                new movie object, or create new elements, etc...This is known as writing <code>modular</code> code.
            </div>

            <div class="point">
                One major gotcha here...if our "modules" that we are creating are created inside an <code>IIFE</code>,
                and and <code>IIFE</code> creates a new scope that the outer scopes can't reach, how can code in another
                file access our <code>Movie</code> constructor or <code>e</code> function?
            </div>

            <div class="point">
                The short answer is that it can't.  You MUST assign something back to the window object so that other
                code can use it.  We'll look at this in the next excercise.
            </div>

            <div class="point">
                Lets do a bit of refactoring to our take home to break this up our code and make it a bit more modular.
            </div>

            <div class="point">
                First, lets determine some good places that we can break this up a little bit.  What about something like:

                <ul class="list">
                    <li>movie.js - Will hold our <code>Movie</code> constructor and it's prototype, nothing else.</li>
                    <li>element.js - Will hold our e function.</li>
                    <li>
                        movieapp.js - Will hold our event listeners other code that will use the movie.js and element.js
                        files.
                    </li>
                </ul>

                <div class="excercise">
                    Try it: Create two new files, movie.js and element.js and move the code from the take home into
                    the appropriate files.  Then make sure to include those files on your html page in an order that
                    makes sense.  Remember, if movieapp.js will need to use code from movie.js and element.js then movie.js
                    and element.js need to load first.
                </div>
            </div>

            <div class="point">
                Lets start with the movie.js module.  First we start with an <code>IIFE</code>:
            </div>

<pre>
    <code class="language-javascript">
(function () {
    //Movie constructor goes here
}());
    </code>
</pre>

            <div class="point">
                Now we can add our movie constructor, and remove it from our main application (inline in your html page
                or from an external file)
            </div>

<pre>
    <code class="language-javascript">
(function() {
    /**
     * Define our Movie constructor function.
     * @param title
     * @param runningTimeInMinutes
     * @param year
     * @param genre
     * @param desc
     * @constructor
     */
    function Movie(title, runningTimeInMinutes, year, genre, desc) {
        this.title = title;
        this.runningTimeInMinutes = parseInt(runningTimeInMinutes, 10) || 0;
        this.year = year;
        this.genre = genre;
        this.desc = desc || "";
    }

    /**
     * The movie prototype, lets you see a running time in hours and
     * a preview snippet based on the description.
     * @type {{runningTimeHours: Function, preview: Function}}
     */
    Movie.prototype = {
        runningTimeHours: function runningTimeHours() {
            if (!isNaN(this.runningTimeInMinutes)) {
                return (this.runningTimeInMinutes / 60) + " hrs";
            }
        },
        preview: function preview() {
            return this.desc.slice(0, 50) + "...";
        }
    };

    //WE MUST now stick the Movie object somewhere accessible
    window.Movie = Movie;
}());
    </code>
</pre>

            <div class="point">
                Now, the <code>Movie</code> constructor is neatly contained in the movie.js file, and exposed to the
                window at the end of the file so it can be used throughout the application.
            </div>

            <div class="point">
                <div class="excercise">
                    Try it: Create the element.js file and set it up in the same way as movie.js.  Add the relevant code,
                    expose what you want exposed to the window.
                </div>
            </div>

            <div class="point">
                Don't forget to alter your html file so that the new files are included.  The end result should be
                that your main block of js only contains the event listener for the form submit event, with all other
                code living in relevant modules.  Something like:
            </div>

<pre>
    <code class="language-markup smallText">
&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8"&gt;
        &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
        &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;
        &lt;title&gt;Geekwise - Movie App&lt;/title&gt;

        &lt;!-- Bootstrap --&gt;
        &lt;link rel="stylesheet" href="./static/js/bootstrap/css/bootstrap.min.css" /&gt;
        &lt;link href='http://fonts.googleapis.com/css?family=Raleway:400,100,700' rel='stylesheet' type='text/css'&gt;
        &lt;link rel="stylesheet" href="./static/css/moviesapp.css" /&gt;
    &lt;/head&gt;
    &lt;body&gt;

        &lt;div class="container"&gt;
            &lt;div class="row"&gt;
                &lt;h1 class="text-center"&gt;
                    My Movies
                &lt;/h1&gt;
            &lt;/div&gt;

            &lt;div class="row"&gt;
                &lt;div class="col-md-4"&gt;
                    &lt;ul id="movieList"&gt;&lt;/ul&gt;
                &lt;/div&gt;

                &lt;div class="col-md-8"&gt;
                    &lt;form id="newMovie" class="form" role="form"&gt;
                        &lt;div class="form-group"&gt;
                            &lt;label for="movieTitle"&gt;Movie Title&lt;/label&gt;
                            &lt;input class="form-control" type="text" name="movieTitle" id="movieTitle" /&gt;
                        &lt;/div&gt;

                        &lt;div class="form-group"&gt;
                            &lt;label for="runningTime"&gt;Running Time&lt;/label&gt;
                            &lt;input class="form-control" type="number" name="runningTime" id="runningTime" /&gt;
                        &lt;/div&gt;

                        &lt;div class="form-group"&gt;
                            &lt;label for="year"&gt;Year Released&lt;/label&gt;
                            &lt;input class="form-control" type="number" name="year" id="year" /&gt;
                        &lt;/div&gt;

                        &lt;div class="form-group"&gt;
                            &lt;label for="genre"&gt;Genre&lt;/label&gt;
                            &lt;input class="radio-inline" type="radio" name="genre" value="action"  /&gt; Action
                            &lt;input class="radio-inline" type="radio" name="genre" value="drama" /&gt; Drama
                            &lt;input class="radio-inline" type="radio" name="genre" value="comedy" /&gt; Comedy
                        &lt;/div&gt;

                        &lt;div class="form-group"&gt;
                            &lt;label for="desc"&gt;Desc&lt;/label&gt;
                            &lt;textarea class="form-control" name="desc" id="desc" cols="30" rows="10"&gt;&lt;/textarea&gt;
                        &lt;/div&gt;

                        &lt;button class="btn btn-lg btn-primary"&gt;Create New Movie&lt;/button&gt;
                    &lt;/form&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;script type="text/javascript" src="./static/js/jquery-2.1.1.min.js"&gt;&lt;/script&gt;
        &lt;script type="text/javascript" src="./static/js/bootstrap/js/bootstrap.min.js"&gt;&lt;/script&gt;
        &lt;script type="text/javascript" src="./static/js/movie.js"&gt;&lt;/script&gt;
        &lt;script type="text/javascript" src="./static/js/element.js"&gt;&lt;/script&gt;
        &lt;script type="text/javascript" src="./static/js/movieapp.js"&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
    </code>
</pre>

        </div>
    </div>

    <div class="row">
        <div class="col-md-3">
            <h2 class="text-right">More DOM</h2>
        </div>
        <div class="col-md-9">
            <div class="point">
                When it comes to the dom, so far we've been creating our dom elements one at a time, and adding them to
                the DOM.  There are some other methods of creating content that are a little simpler, though not without
                their drawbacks.
            </div>

            <div class="point">
                The first method allows for creating a chunk of DOM from a string.  So rather than creating a div with
                create element, we can simply inject a string of HTML into the dom using the <code>innerHTML</code> property
                of an existing node.
            </div>

<pre>
    <code class="language-javascript">
var p = document.createElement("p");
p.innerHTML = "This is a &lt;strong&gt;strong&lt;/strong&gt; string";
    </code>
</pre>

            <div class="point">
                Notice, this creates a p element using the normal <code>createElement</code> method, and then sets the
                innerHTML property to a string of HTML.  This is automatically parsed into proper HTML by the DOM and
                is suitable for then appending to the dom.
            </div>

            <div class="point">
                This method is not without it's drawbacks however, try creating a invalid string of html.
            </div>

<pre>
    <code class="language-javascript">
var p = document.createElement("p");
p.innerHTML = "This is a &lt;strong&gt;strong&lt;/b&gt; string";
    </code>
</pre>

            <div class="point">
                It's also worth it to note, that the <code>innerHTML</code> property of a node can be really handy for
                removing a whole bunch of content.

                <div class="excercise">
                    Lets return to our takehome and add several movies to the movieList ul tag.  Then select the ul
                    that holds the movies and set the innerHTML property to "".
                </div>
            </div>

            <div class="point">
                If you're careful with the <code>innerHTML</code> property you can get pretty far.  Again, it's not without
                it's drawbacks, but it's a useful property to be aware of when you need to create a large amount of dom
                without all the boiler plate required via <code>createElement</code>, etc...
            </div>

        </div>
    </div>



    <div class="row">
        <div class="col-md-3">
            <h2 class="text-right">Takehome Assignment</h2>
        </div>
        <div class="col-md-9">
            <div class="point">
                Lets continue with development of our day 8 take home and enhance the functionality there.  Modify your
                submit event handler in the following way:

                <ol class="list">
                    <li>Add a new button to your UI called "Add New Movie"</li>
                    <li>Store all of our Movie instances in an new array.</li>
                    <li>Sort that array by movie title, ascending</li>
                    <li>Dump all the content in the ul (use innerHTML = "")</li>
                    <li>Loop our sorted movie array and build new li tags for each movie.</li>
                    <li>For each li, add an attribute "data-movieIdx" equal to the current index in the loop</li>
                    <li>
                        Modify the click handler for the li so that it retrieves the data-movieIdx attribute value, and
                        then finds the proper movie object from the array of movie objects (based on that index).
                    </li>
                    <li>
                        When a movie title is clicked on in the list of movie titles, hide the form (get a reference to the
                        form or something higher up in the dom containing the form and set it's style property to none.)
                    </li>
                    <li>
                        When the "Add new movie" button is clicked on it should show the form.  Same as the previous step
                        but in the opposite way.
                    </li>
                    <li>Add a <code>checkIn</code> function to the Movie prototype that stores the date of a checkin</li>
                    <li>Add a <code>checkOut</code> function to the Movie prototype that store the date of a checkout</li>
                </ol>
            </div>
        </div>
    </div>

<!-- closing the main container -->
</div>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript" src="./static/js/prism.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="./static/js/nav.js"></script>
<script type="text/javascript">
    function geekwiseClass() {
        console.log("Congrats, you found a global function");
    }
</script>
</body>
</html>
