<!--.row>(.col-md-3>h2.text-right)+.col-md-9-->
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Geekwise Javascript 1</title>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,400,300,600,700'
          rel='stylesheet'
          type='text/css'>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="./static/css/prism.css" />
    <link rel="stylesheet" href="./static/css/reset.css">
    <link rel="stylesheet" href="./static/css/style.css">
</head>
<body class="theme day">
<header id="nav">
</header>

<div class="container content">
    <h1 class="row text-center hdr">
        Day 7
    </h1>

    <div class="row">
        <div class="col-md-3">
            <h2 class="text-right">Concepts</h2>
        </div>
        <div class="col-md-9 concepts">
            <ul>
                <li>Review Take Home Assignment</li>
                <li>Skill Builder</li>
                <li>the <code>arguments</code> keyword</li>
                <li>function scope</li>
                <li>function expressions and other gotchas</li>
                <li>for / in loop</li>
                <li>The DOM</li>
                <li>Selecting Elements on a page</li>
                <li>Creating Elements</li>
                <li>Removing Elements</li>
            </ul>
        </div>
    </div>

    <div class="row">
        <div class="col-md-3">
            <h2 class="text-right">Review Take Home</h2>
        </div>
        <div class="col-md-9">
<pre>
    <code class="language-javascript">
function Bank(balance) {
    balance = parseInt(balance, 10);
    balance = isNaN(balance) ? 100 : balance;
    this.balance = balance;
}

Bank.prototype = {
    credit: function (credit) {
        credit = parseInt(credit, 10);

        if (isNaN(credit)) {
            return;
        }

        this.balance += credit;
    },
    debit: function (debit) {
        debit = parseInt(debit, 10);

        if (isNaN(debit)) {
            return;
        }

        this.balance -= debit;
    }
};

var EECU = new Bank();

for (var i = 0; i < 3; i++) {
    var credit = prompt("Enter an amount to credit your account");

    EECU.credit(credit);
}

for (var i = 0; i < 2; i++) {
    var debit = prompt("Enter an amount to debit your account");

    EECU.debit(debit);
}

console.log(EECU.balance);
    </code>
</pre>
        </div>
    </div>


    <div class="row">
        <div class="col-md-3">
            <h2 class="text-right">Skill Builder</h2>
        </div>
        <div class="col-md-9">
            <div class="point">
                Refactor the take home so that:

                <ul class="list">
                    <li>
                        Create a new function called <code>doDebitCredit</code> that has a signature
                        <code>doDebitCredit(numLoops, action, desc)</code>
                    </li>
                    <li>
                        The <code>doDebitCredit</code> function should create a loop that will run the specified number
                        of times <code>numLoops</code>, prompt the user with the given <code>desc</code>for a number,
                        and then run the specified <code>action"</code> (HINT: remember functions are first class
                        citizens in javascript, so you can pass them into other functions).
                    </li>
                    <li>
                        Finally, log the final balance and ensure it's the proper amount.
                    </li>
                </ul>
            </div>

            <div class="point">
                What issues did you run into?  What did the results of the console.log yield?  How can you explain the
                results?  How can you fix the issues?
            </div>
        </div>
    </div>

    <div class="row">

        <h3>The <code>arguments</code> keyword</h3>

            <div class="point">
                This is more of an advanced topic, but worth mentioning here.  Inside any javascript function, you will
                have available to use an array like object called <code>arguments</code>.
            </div>

            <div class="point">
                I say array like because it looks like an array, but is actually missing many of the functions arrays
                have to work with.  However, it does contain a <code>length</code> property.
            </div>

            <div class="point">
                Lets take a look at how the <code>arguments</code> variable works.

                <div class="excercise">
                    Try it: lets create a function that will add up all of the arguments we pass into it.  In all other
                    cases we've looked at, you must map the arguments being passed into the function, to the function
                    declaration itself, so the <code>arguments</code> variable will actually let us handle an arbitrary
                    number of arguments.  This means we don't need to define the arguments in the function <strong>signature</strong>.
                </div>
            </div>

<pre>
    <code class="language-javascript">
function adder() {
    console.log(arguments);
}
    </code>
</pre>

            <div class="point">
                Lets finish this function by making it add up all of the arguments we pass into it.  Anything non numberish
                should be ignored.  For instance, if I call <code>adder(1, 2, "foo")</code>, the result should be 3.
            </div>

            <h3>Function Scope</h3>

            <div class="point">Every js program runs with a "scope".  This can be thought of as the things that are
            currently available to the execution of a program.  The main / base scope is referred to as the "global"
            scope.</div>

            <div class="point">
                Creating a function in javascript creates a new scope
            </div>

            <div class="point">
                One important thing to understand is that code <strong>outside</strong> of a function can not access any
                code <code>inside</code> the function.
            </div>

<pre>
    <code class="language-javascript">
function foo() {
    var a = "inside foo";
    return a;
}

console.log(a); //undefined, because "a" is "scoped" to the foo function
console.log(foo()); //should log "inside foo" because the function was called, and a value returned
    </code>
</pre>

            <div class="point">
                Got it, code outside of a function can't access anything other than what's returned from a function.  So
                it stands to reason that code inside a function can't access anything outside of the function either?
            </div>

<pre>
    <code class="language-javascript">
var name = "adam";

function capitalize() {
    return name[0].toUpperCase() + name.slice(1);
}

var capitalizedName = capitalize();
console.log(capitalizedName);
    </code>
</pre>

        <div class="point">
            Ah, maybe not what you expected?  Functions do have access to the variables and other functions that exists
            in outer scopes (which, when you think about it, is why you can console.log(...) something inside of a
            function.
        </div>

        <h3>Function Expressions and other Gotchas</h3>

        <div class="point">
            So now we know how to write a function, but there are other ways to do it as well.  You'll surely encounter
            them in the wild so it's nice to know what's going on when you see them.
        </div>

        <div class="point">
            Functions in javascript are "first class".  This means they can be passed as arguments to other functions,
            returned from other functions, and assigned to variables (instead of being a named function).
        </div>

        <div class="point">
            When a function is assigned to a variable, it's called a <strong>function expression</strong>.

            <div class="excercise">
                Try it: Create a function expression that assigned a function to a variable.
            </div>
        </div>

<pre>
    <code class="language-javascript">
var capitalize = function (str) {
    return str[0].toUpperCase() + str.slice(1);
};
    </code>
</pre>


        <div class="point">
            So what is different here.  Notice, the function declaration does not have a name.  This is what is known as
            an <code>Anonymous function</code>, or a function with no name.
        </div>

        <div class="point">
            If it has no name, how do we call it?  Same way we do with other functions, but we use the variable name
            instead.  In the case of the capitalize function above, we can call it as <code>capitalize("adam")</code>.

            <div class="excercise">
                Try it: Create and execute a function expression.
            </div>
        </div>

<pre>
    <code class="language-javascript">
var capitalize = function (str) {
    if (!str) {
        return "";
    }

    return str[0].toUpperCase() + str.slice(1);
};

console.log(capitalize("adam"));
    </code>
</pre>

        <div class="point">
            One thing to note about anonymous functions, they don't actually have to be anonymous.  In fact, it's good
            practice to name all your functions, for the purposes of error reporting.  The function below will work
            just the same.
        </div>

<pre>
    <code class="language-javascript">
var capitalize = function capitalize(str) {
    if (!str) {
        return "";
    }

    return str[0].toUpperCase() + str.slice(1);
};

console.log(capitalize("adam"));
    </code>
</pre>

        <div class="point">
            Now, lets try an experiment.  Lets create a new function (not a function expression) called <code>logName</code>.
            Then, above that code, lets call <code>logName</code>.  What would you expect to happen?
        </div>

<pre>
    <code class="language-javascript">
logName("adam");

function logName(name) {
    console.log(name);
}
    </code>
</pre>

        <div class="point">
            This is due to something javascipt is doing called <code>hoisting</code>.
        </div>

        <div class="point">
            Even though javascript executes <strong>linearly</strong>, variable and function definitions are actually
            "hoisted" to the top of the scope.  So even though we call logName before we define it, javascript is actually
            recognizing the definition of the function, hoisting it to the top of the scope, which makes it available to
            call before the definition in the code actually happens.
        </div>

        <div class="point">
            Is the same true of function expressions?

            <div class="excercise">
                Try it: Call a function expression before it's defined.  What happens?
            </div>
        </div>

<pre>
    <code class="language-javascript">
foo("adam");

var foo = function (name) {
    console.log(name);
};
    </code>
</pre>

        <div class="point">
            So what happend there?  Why did we get the <code>undefined is not a function</code>?
        </div>

        <div class="point">
            The reason for this is that <strong>only</strong> named function definitions and variable declarations are
            hoisted.  The <strong>values</strong> of the variables are not hoisted.
        </div>

        <div class="point">
            Lets look at this a little closer.  What would you expect to happen in the example below?
        </div>

<pre>
    <code class="language-javascript">
var name = "Adam";

function alertName() {
    alert(name);

    var name = "Jules";

    alert(name);
}

alertName();
    </code>
</pre>
        <div class="col-md-3">
            <h2 class="text-right">for / in loop</h2>
        </div>
        <div class="col-md-9">
            <div class="point">
                The <code>for / in</code> loop is a nice way of looping over an objects keys.  It looks like this:
            </div>

<pre>
    <code class="language-javascript">
var obj = {
    name: "greg",
    age: 35
};

for (var key in obj) {
    console.log(key);
    console.log(obj[key]);
}
    </code>
</pre>

            <div class="point">
                One gotcha here...remember we discussed prototype as a way of inheriting properties?  Well, the <code>for / in</code>
                loop will also loop over those properties if they exist in the object.  For this reason, it's good practice
                to add a check to make sure that the <code>key</code> we are working with only exists on the actual object
                and not part of some other prototype.
            </div>

<pre>
    <code class="language-javascript">

var obj = {
    name: "greg",
    age: 35
};

for (var key in obj) {
    if (obj.hasOwnProperty(key)) {
        console.log(key);
        console.log(obj[key]);
    }
}
    </code>
</pre>

            <div class="point">
                This will now ONLY operate on a key that actually exists in the <code>obj</code>.
            </div>
        </div>
    </div>


    <div class="row">
        <div class="col-md-3">
            <h2 class="text-right">The DOM</h2>
        </div>
        <div class="col-md-9">
            <div class="point">
                What is the DOM?
            </div>
            <div class="point">
                The Document Object Model (DOM) is a programming interface for HTML.  It's what allows javascript to
                manipulate an HTML page after it's been loaded in the browser.
            </div>
            <div class="point">
                The DOM provides a representation of the document as a structured group of nodes and objects that have
                properties and methods
            </div>

            <h3>
                Accessing Page Elements
            </h3>

            <div class="point">
                Javascript wouldn't be of much use to us if we couldn't use it to manipulate HTML pages in some way.
            </div>

            <div class="point">
                In order to begin manipulating elements on the page, we need to know how to "reference" those items.
                For example, if we want to change our pages &lt;h1&gt; tag, we need to be able to tell javascript
                which node on the page we want to change.
            </div>

            <h3>
                Selecting Elements on a page
            </h3>

            <div class="point">
                So, using the example above, lets setup an HTML page with an h1 tag in it.
            </div>

<pre>
    <code class="language-markup">
&lt;!doctype html&gt;
&lt;html lang="en"&gt;
    &lt;head&gt;
        &lt;meta charset="UTF-8"&gt;
        &lt;title&gt;Document&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;h1 id="myHdr"&gt;This is an h1 tag&lt;/h1&gt;

        &lt;script type="text/javascript" src="./static/js/day7.js"&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
    </code>
</pre>

            <div class="point">
                The DOM gives us some nice ways to select elements on a page for maniuplating.  The first method we'll discuss
                is called <code>document.getElementById()</code>.
            </div>

            <div class="point">
                Lets select the h1 tag using the <code>getElementById</code> function.  It takes as an <code>argument</code>
                the id of the element you want to select, <code>myHdr</code> in this case.
            </div>

<pre>
    <code class="language-javascript">
var h1 = document.getElementById("myHdr");
console.log(h1);
    </code>
</pre>

            <div class="point">
                Run that page in your browser, you should see the element logged to your console.
            </div>

            <div class="point">
                Now type <code>h1.</code> (notice the period).  The console should now show you all the various properties
                and functions available as part of that object.
            </div>

            <h3>Element Attributes</h3>

            <div class="point">
                You can now see that a "node" or "element" has an underlying javascript object that provides all kinds of
                methods for you to interact with it.  Lets look at some attributes.  First, modify your <code>h1</code>
                tag to include a <code>class="hdr"</code> attribute.
            </div>

<pre>
    <code class="language-markup">
&lt;h1 id="myHdr" class="hdr"&gt;This is an h1 tag&lt;/h1&gt;
    </code>
</pre>

            <div class="point">
                Now lets use the <code>h1.hasAttribute()</code> function to see if the given dom node has a specific
                attribute.
            </div>

<pre>
    <code class="language-javascript">
var hasClass = h1.hasAttribute("class");
console.log("The h1 tag has a class attribute: ", hasClass);
    </code>
</pre>

            <div class="point">
                Run the code above, it returns <code>boolean</code> so if the attribute exists, it will return <code>true</code>
                otherwise it will return <code>false</code>.
            </div>

            <div class="point">
                Cool, so we can see if an element has a specific attribute, what about adding new attributes?  Easily done.
                Using the same DOM node we can call the <code>h1.setAttribute()</code>.  It takes two arguments in it's
                signature, the property name to set, and it's value.  Lets add a <code>rel</code> attribute.
            </div>

<pre>
    <code class="language-javascript">
h1.setAttribute("rel", "something");
console.log(h1);
    </code>
</pre>

            <div class="point">
                Awesome, so now we can add and look at attributes on a dom node, I guess the only thing left is to be
                able to remove them.  This is done with the <code>removeAttribute</code> function.
            </div>

            <div class="point">
                Lets remove the rel attribute now.
            </div>

<pre>
    <code class="language-javascript">
h1.removeAttribute("rel");
    </code>
</pre>

            <div class="point">
                These functions become really handy so practice them!  You can now manipulate ANY webpage you go to that
                uses id's on their elements using your console!
            </div>

            <h3>Creating Elements</h3>

            <div class="point">
                Here is where the real magic of the DOM becomes apparent.  Not only can we inspect the existing DOM, we
                can add to it!  To create an element we use the <code>document.createElement()</code> function.  It takes
                as an argument a string with the same name as the tag you want to create.  So if you wanted to create
                a anchor, you would use <code>document.createElement("a")</code>.  Lets make a new element now...
            </div>

<pre>
    <code class="language-javascript">
var a = document.createElement("a");
console.log(a);
    </code>
</pre>

            <div class="point">
                Great, so we created an empty anchor tag.  This isn't of to much use yet, lets assign some other properties
                to the anchor so we can get some actual use out of it.  How about some text (so we have something to
                click on).  We can set the text content using the <code>textContent</code> property
            </div>

<pre>
    <code class="language-javascript">
a.textContent = "I'm a link to google";
console.log(a);
    </code>
</pre>

            <div class="point">
                And what good is a link without an <code>href</code>?  Now...how did we set attributes on a link?
            </div>

<pre>
    <code class="language-javascript">
a.setAttribute("href", "http://www.google.com");
console.log(a);
    </code>
</pre>

            <div class="point">
                It's worth it to note, that there are some properties of an element that you can access without 
                <code>setAttribute</code>.  <code>href</code> is one of these properties.  If you're ever not sure check 
                out the MDN for what attributes are available via an elements interface.  Here is the link to the
                <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLAnchorElement">Anchor interface</a>.
                Lets set the <code>href</code> of the <code>a</code> tag using this syntax.
            </div>

<pre>
    <code class="language-javascript">
a.href = "http://www.yahoo.com";
    </code>
</pre>

            <div class="point">
                If you're refreshing your page hoping to see your new element ready for use, this may be anticlimactic
                for you.  So far, we've created an element in memory, but now we need to do something with it.
            </div>

            <div class="point">
                Lets add it on the page.  We do this using the <code>appendChild</code> function.  When using the
                <code>appendChild</code> function, we first need to tell the DOM where exactly to append the child to.
                In your console, enter <code>document.body</code>.  What does the console show?
            </div>

            <div class="point">
                The <code>document.body</code> is a shortcut that to the body tag.  Since we want the new element to
                show up on the page, at a minimum it needs to be attached to the body tag (since the body tag is what is
                visible on the page).
            </div>

<pre>
    <code class="language-javascript">
document.body.appendChild(a);
    </code>
</pre>

            <div class="point">
                As you can see above, the <code>document.body</code> is a reference to the &lt;body&gt; tag.  So it's telling
                javascript to append a child node to the body tag.  This can be done on ANY node you have selected.

                <div class="excercise">
                    Try it: append an anchor tag to the h1 we selected earlier in the excercise.
                </div>
            </div>

<pre>
    <code class="language-javascript">
h1.appendChild(a);
    </code>
</pre>

            <h3>Removing Elements</h3>

            <div class="point">
                What good would all of this be if we couldn't remove elements from the page.  This is done with the
                <code>removeChild</code> called on the parent element of the element you want to remove.
            </div>

<pre>
    <code class="language-javascript">
document.body.removeChild(a);
    </code>
</pre>

            <div class="point">
                Note: the removeChild example isn't to exciting, since we add it, then remove it right away.  Lets delay
                the removal of the element using <code>setTimeout</code>.
            </div>

<pre>
    <code class="language-javascript">
setTimeout(function () {
    document.body.removeChild(a);
}, 2000);
    </code>
</pre>

            <div class="point">
                The <code>setTimeout</code> function takes as an argument a function as the first argument and a number
                as the second argument.  The setTimeout function will wait the specified amount of time, then call the
                function you've passed in.  The above will wait 2000 milliseconds, then call the function.
            </div>

            <h3>Other Ways of Selecting DOM nodes</h3>

            <div class="point">
                Lets add some markup to our html page.
            </div>

<pre>
    <code class="language-markup">
&lt;ul&gt;
    &lt;li&gt;&lt;a href="http://google.com"&gt;google&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="http://yahoo.com"&gt;yahoo&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href="http://github.com"&gt;github&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
    </code>
</pre>

            <div class="point">
                There are alternatives to <code>getElementById</code> for cases where an item might not have an id,
                or you want to use an alternative syntax.  The first is <code>document.querySelector</code>.
                Lets try that now...
            </div>

<pre>
    <code class="language-javascript">
var a = document.querySelector("ul li a");
console.log(a);
    </code>
</pre>

            <div class="point">
                What does that yield?  Is it what you would expect?  It should return the first matched element for the
                specified selector.
            </div>

            <div class="point">
                Lets pick the "selector" apart.  We used <code>ul li a</code>.  What this is really saying is, "Find any
                <code>a</code> tags that are children of <code>li</code> tags, where the <code>li</code> tag is a child
                of a <code>ul</code> tag.  Put another way, "Find all anchor tags that are inside an li tag inside a ul".
            </div>

            <div class="point">
                The <code>querySelector</code> function always returns a node or null if no node was matched.  If multiple
                nodes were selected, only the first will be returned.
            </div>

            <div class="point">
                So what if I want to select more than one node?  That's where <code>querySelectorAll</code> comes into
                play.
            </div>

<pre>
    <code class="language-javascript">
var anchors = document.querySelectorAll("ul li a");
console.log(anchors);
console.log(anchors.length);
    </code>
</pre>

            <div class="point">
                The <code>querySelectorAll</code> function returns a <code>NodeList</code> which looks like an array, but
                actually isn't.  It's kind of like the <code>arguments</code> property inside a function, it has a length
                property, but doesn't have other array methods like push, pop, etc...
            </div>

            <div class="point">
                A <code>NodeList</code> object provides an <code>item</code> function that you can use to select a specific
                item at a specified index.
            </div>

<pre>
    <code class="language-javascript">
console.log(anchors.item(2));
console.log(anchors.item(10));
    </code>
</pre>

            <div class="point">
                Since a <code>NodeList</code> looks a lot like an array, and has a length property, that means it can be
                used as the basis for a loop, yeah?  Lets loop over each link, and log to the console the <code>href</code>
                property of each node.
            </div>

<pre>
    <code class="language-javascript">
for (var i = 0; i < anchors.length; i++) {
    var anchor = anchors.item(i);
    console.log(anchor.href);
}
    </code>
</pre>

            <h3>Styling Elements</h3>

            <div class="point">
                Along with selecting, adding and modifying elements in the dom, we can also apply styling.  We do this via the
                <code>element.style</code> property.
            </div>

            <div class="point">
                When we use this property, the style names use no dashes, instead using camelCasing.  For instance, if a
                css selector looked like:
            </div>

<pre>
    <code class="language-css">
a {
    background-color: red;
}
    </code>
</pre>

            <div class="point">
                The javascript style property would be:
            </div>

<pre>
    <code class="language-javascript">
a.style.backgroundColor = "red";
    </code>
</pre>

            <div class="point">
                However, we could alternatively set the style property using the <code>setAttribute</code> function.  When
                we do it that way, we can use the regular css syntax.
            </div>

<pre>
    <code class="language-javascript">
a.setAttribute("style", "background-color: red; color: white;");
    </code>
</pre>

            <h3>Putting it all together</h3>

            <div class="point">
                So at this point we now know how to select existing elements, create new elements, modify element attributes,
                and append the elements to other elements already on the page.  Lets create a helper function to make
                some of this easier.

                <div class="excercise">
                    Try it: Create a function that will have the following signature: <code>e(elementType, text, attributes, styles)</code>
                    where <code>elementType</code> is a string of an element type, attributes is an object of attributes to set
                    on an element, and styles is an object of style properties to set on an object.  Then return the
                    newly created element.
                </div>
            </div>

<pre>
    <code class="language-javascript">
function e(elementType, text, attributes, styles) {
    var newElement = document.createElement(elementType);
    newElement.textContent = text;

    //set the attributes on the tag
    for (var attr in attributes) {
        if (attributes.hasOwnProperty(attr)) {
            newElement.setAttribute(attr, attributes[attr]);
        }
    }

    //set the styles
    for (var style in styles) {
        if (styles.hasOwnProperty(style)) {
            newElement.style[style] = styles[style];
        }
    }

    return newElement;
}

e("a", "link to google", {href: "http://www.google.com"}, {color: "red"});
    </code>
</pre>

        </div>
    </div>

    <div class="row">
        <div class="col-md-3">
            <h2 class="text-right">Take Home</h2>
        </div>
        <div class="col-md-9">
            <div class="point">
                Write a js program that will:

                <ul class="list">
                    <li>Create a <code>ul</code> element with an id of "movies"</li>
                    <li>Use your original movie array of objects as the basis for a loop</li>
                    <li>During each loop, create one <code>li</code> tag</li>
                    <li>Set the text of the li tag to the movie title.</li>
                    <li>Append the newly created <code>li</code> tag to the existing <code>ul</code></li>
                    <li>Append the <code>ul</code> to the <code>document.body</code>.</li>
                </ul>

                The result should be a dynamically created html list.
            </div>
        </div>
    </div>
<!-- closing the main container -->
</div>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script type="text/javascript" src="./static/js/prism.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="./static/js/nav.js"></script>
<script type="text/javascript">
    function geekwiseClass() {
        console.log("Congrats, you found a global function");
    }
</script>
</body>
</html>
